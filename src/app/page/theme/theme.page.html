<header class="header" [headerTpl]="headerTpl" [isBackButton]="false" [style]="{}">
</header>
<ng-template #headerTpl>
    <div style="display:flex">
        <div style="flex:1">
            <img src="https://nonunbub.s3.ap-northeast-2.amazonaws.com/static/fe-assets/new/arrow-left.svg"
                class="nnb-icon" (click)="location.back()">
        </div>
        <div class="header-title-md" *ngIf="theme">{{theme.name}}</div>
        <div style="flex:1"></div>
    </div>
</ng-template>

<div class="frame">
    <div class="section-md" style="padding-top: 8px;">
        <div *ngIf="theme" style="padding:16px 32px;border-radius: 24px;;margin-bottom: 24px;"
            [ngStyle]="{'background':theme.color}">
            <div style="display:flex;justify-content: space-between;align-items: center">
                <div>
                    <div style="color:#6E7D6F;font-size: 14px;">{{theme.desc}}</div>
                    <div style="font-size: 20px;font-weight: 600;">{{theme.name}}</div>
                </div>
                <img [src]="'/assets/'+theme.img+'.png'" style="width: 68px;">
            </div>
            <hr style="margin:11px -16px 16px -10px">
            <div style="display: flex;gap:4px;flex-direction: column;">
                <div *ngFor="let standard of standards">
                    <div *ngIf="standard === 'revenuePerYearIncreaseRatio'"
                        style="display: flex;justify-content: space-between;align-items: center;">
                        <div style="display: flex;gap:4px;align-items: center;">
                            <div class="nnb-badge nnb-badge-md nnb-badge-outline">연평균 매출액 증감률</div>
                            <img style="width:18px;height:18px;cursor: pointer;" src="/assets/information.png"
                                (click)="openBm(descTpl,'연평균 매출액 증감률')">
                        </div>
                        <div class="desc">10% 이상 (최근 3년)</div>
                    </div>
                    <div *ngIf="standard === 'netProfitPerYearIncreaseRatio'"
                        style="display: flex;justify-content: space-between;align-items: center;">
                        <div style="display: flex;gap:4px;align-items: center;">
                            <div class="nnb-badge nnb-badge-md nnb-badge-outline">연평균 순이익 증감률</div>
                            <img style="width:18px;height:18px;cursor: pointer;" src="/assets/information.png"
                                (click)="openBm(descTpl,'연평균 순이익 증감률')">
                        </div>
                        <div class="desc">20% 이상 (최근 3년)</div>
                    </div>
                    <div *ngIf="standard === 'per'"
                        style="display: flex;justify-content: space-between;align-items: center;">
                        <div style="display: flex;gap:4px;align-items: center;">
                            <div class="nnb-badge nnb-badge-md nnb-badge-outline">PER</div>
                            <img style="width:18px;height:18px;cursor: pointer;" src="/assets/information.png"
                                (click)="openBm(descTpl,'PER')">
                        </div>
                        <div class="desc">20배 이하</div>
                    </div>
                    <div *ngIf="standard === 'netProfitIncreaseRatio'"
                        style="display: flex;justify-content: space-between;align-items: center;">
                        <div style="display: flex;gap:4px;align-items: center;">
                            <div class="nnb-badge nnb-badge-md nnb-badge-outline">순이익 증감률</div>
                            <img style="width:18px;height:18px;cursor: pointer;" src="/assets/information.png"
                                (click)="openBm(descTpl,'순이익 증감률')">
                        </div>
                        <div class="desc">10% 이상</div>
                    </div>
                    <div *ngIf="standard === 'roe'"
                        style="display: flex;justify-content: space-between;align-items: center;">
                        <div style="display: flex;gap:4px;align-items: center;">
                            <div class="nnb-badge nnb-badge-md nnb-badge-outline">ROE</div>
                            <img style="width:18px;height:18px;cursor: pointer;" src="/assets/information.png"
                                (click)="openBm(descTpl,'ROE')">
                        </div>
                        <div class="desc">15% 이상</div>
                    </div>
                    <div *ngIf="standard === 'continuousIncreaseNetProfit'"
                        style="display: flex;justify-content: space-between;align-items: center;">
                        <div style="display: flex;gap:4px;align-items: center;">
                            <div class="nnb-badge nnb-badge-md nnb-badge-outline">순이익 연속증가</div>
                            <img style="width:18px;height:18px;cursor: pointer;" src="/assets/information.png"
                                (click)="openBm(descTpl,'순이익 연속증가')">
                        </div>
                        <div class="desc">3년 이상</div>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-bottom:4px;color:#6A7684;">주식 {{meta?.totalItems|number}}{{meta?.totalItems?'개':''}}</div>
        <div style="overflow: auto;">
            <table>
                <thead>
                    <tr>
                        <th #th style=" text-align: left;position: sticky; left: 0;background:
            white;z-index:1;padding:0px">
                            주식</th>
                        <th #thView>매출액</th>
                        <th>영업이익</th>
                        <th>당기순이익</th>
                        <th>영업이익률</th>
                        <th>순이익률</th>
                        <th>ROE</th>
                        <th>EPS</th>
                        <th>PER</th>
                        <th>BPS</th>
                        <th>PBR</th>
                        <th>주당배당금</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let corp of corps">
                        <td class="myTd" style="text-align: left;position: sticky; left: 0;background: white;">
                            <div style="display:flex;gap:4px;align-items: center;">
                                <img [src]="corp.logo" style="width:24px;height:24px">
                                <div>{{corp?.name}}</div>
                            </div>
                        </td>
                        <td class="otherTd">{{corp?.finance?.fullRevenue |
                            number}}{{corp?.finance?.fullRevenue?'억원':''}}</td>
                        <td class="otherTd">{{corp?.finance?.operatingProfit|
                            number}}{{corp?.finance?.operatingProfit?'억원':''}}
                        </td>
                        <td class="otherTd">{{corp?.finance?.netIncome| number}}{{corp?.finance?.netIncome?'억원':''}}
                        </td>
                        <td class="otherTd">
                            {{corp?.finance?.operatingProfitMargin|number}}{{corp?.finance?.operatingProfitMargin?'%':''}}
                        </td>
                        <td class="otherTd">{{corp?.finance?.netProfitMargin|
                            number}}{{corp?.finance?.netProfitMargin?'%':''}}</td>
                        <td class="otherTd">{{corp?.finance?.roe| number}}{{corp?.finance?.roe?'%':''}}</td>
                        <td class="otherTd">{{corp?.finance?.eps| number}}{{corp?.finance?.eps?'원':''}}</td>
                        <td class="otherTd">{{corp?.finance?.per| number}}{{corp?.finance?.per?'배':''}}</td>
                        <td class="otherTd">{{corp?.finance?.bps| number}}{{corp?.finance?.bps?'원':''}}</td>
                        <td class="otherTd">{{corp?.finance?.pbr| number}}{{corp?.finance?.pbr?'배':''}}</td>
                        <td class="otherTd">{{corp?.finance?.dividendPerShare|
                            number}}{{corp?.finance?.dividendPerShare?'원':''}}
                        </td>
                    </tr>
                </tbody>
            </table>
            <div infinite-scroll (scrolled)="onScroll()"></div>
        </div>
    </div>
</div>


<ng-template #descTpl>
    <div style="font-size: 22px;font-weight: 600;margin-bottom:24px">{{selectedQuestion}}</div>
    <ul *ngIf="selectedQuestion === '연평균 매출액 증감률'" style="padding: 0px 16px;">
        <li>기업의 매출액이 매년 얼마나 설장했는지 평균하여 계산한 성장률이에요. 장기적인 관점에서 기업의 성장 추세를 파악할 수 있어요.</li>
        <li>매출이 3년간 연평균 10% 이상 증가하면, 꾸준한 매출 성장을 하고 있다고 볼 수 있어요.</li>
    </ul>
    <ul *ngIf="selectedQuestion === '연평균 순이익 증감률'" style="padding: 0px 16px;">
        <li>기업의 순이익이 매년 얼마나 성장했는지 평균하여 계산한 성장률이에요. 장기적인 관점에서 기업의 이익 성장 추세를 파악할 수 있어요.</li>
        <li>순이익이 3년간 연평균 20% 이상 증가하면, 빠른 이익 성장을 하고 있다고 볼 수 있어요.</li>
    </ul>
    <ul *ngIf="selectedQuestion === '연평균 매출액 증감률'" style="padding: 0px 16px;">
        <li>기업의 매출액이 매년 얼마나 설장했는지 평균하여 계산한 성장률이에요. 장기적인 관점에서 기업의 성장 추세를 파악할 수 있어요.</li>
        <li>매출이 3년간 연평균 10% 이상 증가하면, 꾸준한 매출 성장을 하고 있다고 볼 수 있어요.</li>
    </ul>
    <ul *ngIf="selectedQuestion === 'PER'" style="padding: 0px 16px;">
        <li>주가를 주당순이익으로 나눈 값으로 PER이 낮을 수록 기업이 내는 이익에 비해 주가가 저평가 되어 있다는 의미에요.</li>
        <li>일반적으로 주가수익비율이 10배 이하면 주가가 낮게 평가되고 있다고 볼 수 있어요.</li>
    </ul>
    <ul *ngIf="selectedQuestion === '순이익 증감률'" style="padding: 0px 16px;">
        <li>이전 기간 대비 순이익이 얼마나 변했는지를 나타내는 비율이에요.</li>
        <li>기업의 수익성 변화를 확인할 수 있어요.</li>
    </ul>
    <ul *ngIf="selectedQuestion === 'ROE'" style="padding: 0px 16px;">
        <li>기업이 자기자본으로 벌어들인 순이익의 비율로, 주주들의 돈으로 얼마만큼의 이익을 남겼는지 알 수 있어요.</li>
        <li>ROE가 높을 수록 자본효율성 또는 수익성이 높다는 의미에요.</li>
    </ul>
    <ul *ngIf="selectedQuestion === '순이익 연속증가'" style="padding: 0px 16px;">
        <li>순이익이 연속적으로 증가하는 횟수를 나타낸 지표에요.</li>
        <li>지속적인 순이익 증가는 기업의 이익 성장성이 좋다는 의미로 해석할 수 있어요.</li>
    </ul>
</ng-template>